/* 
 * PNX8550 SPDIF Out module definitions.
 *
 * Public domain.
 * 
 */

#ifndef __PNX8550_SPDO_H
#define __PNX8550_SPDO_H

#include <asm/mach-pnx8550/cm.h>
#include <asm/mach-pnx8550/int.h>

#define PNX8550_SPDO_BASE	0xBBF09000

#define PNX8550_SPDO_STATUS      *(volatile unsigned long *)(PNX8550_SPDO_BASE + 0x000)
#define PNX8550_SPDO_CTL         *(volatile unsigned long *)(PNX8550_SPDO_BASE + 0x004)
#define PNX8550_SPDO_BUF1_BASE   *(volatile unsigned long *)(PNX8550_SPDO_BASE + 0x00C)
#define PNX8550_SPDO_BUF2_BASE   *(volatile unsigned long *)(PNX8550_SPDO_BASE + 0x010)
#define PNX8550_SPDO_SIZE        *(volatile unsigned long *)(PNX8550_SPDO_BASE + 0x014)

#define PNX8550_SPDO_DDS_CTL     PNX8550_CM_DDS8_CTL
#define PNX8550_SPDO_DDS_REF     1728000000
#define PNX8550_SPDO_DDS_MIN     2545165
#define PNX8550_SPDO_DDS_MAX     30541990
#define PNX8550_SPDO_DDS_48      15270995
#define PNX8550_SPDO_RATE_MIN    8000
#define PNX8550_SPDO_RATE_MAX    96000
#define PNX8550_SPDO_BCLK_CTL    PNX8550_CM_SPDO_BCLK_CTL
#define PNX8550_SPDO_BCLK_ENABLE  (PNX8550_CM_SPDO_CLK_ENABLE | PNX8550_CM_SPDO_CLK_FCLOCK)

#define PNX8550_SPDO_RESET                 0x80000000
#define PNX8550_SPDO_TRANS_ENABLE          0x40000000
#define PNX8550_SPDO_TRANS_MODE_IEC        0x00000000
#define PNX8550_SPDO_TRANS_MODE_TRANSP_LSB 0x10000000
#define PNX8550_SPDO_TRANS_MODE_TRANSP_MSB 0x18000000
#define PNX8550_SPDO_BUF_INTEN             0x00000030

#define PNX8550_SPDO_BUF1         0x00000001
#define PNX8550_SPDO_BUF2         0x00000002
#define PNX8550_SPDO_HBE          0x00000004
#define PNX8550_SPDO_UDR          0x00000008
#define PNX8550_SPDO_BUF1_ACTIVE  0x00000010

#define PNX8550_SPDO_PREAMBLE_BLOCK 0x0
#define PNX8550_SPDO_PREAMBLE_CHAN1 0x1
#define PNX8550_SPDO_PREAMBLE_CHAN2 0x2
#define PNX8550_SPDO_PREAMBLE_CHAN2 0x2
#define PNX8550_SPDO_BIT_INVALID  (1 << 28)
#define PNX8550_SPDO_BIT_USERDATA (1 << 29)
#define PNX8550_SPDO_BIT_CHSTATUS (1 << 30)

#define PNX8550_SPDIF_INTERFACE_MODE_BIT (0)
#define PNX8550_SPDIF_DATA_MODE_BIT      (1)
#define PNX8550_SPDIF_SCMS_DISABLE_BIT   (2)
#define PNX8550_SPDIF_PREEMPH_BIT(x)     (((x) & 3) + 3)
#define PNX8550_SPDIF_MODE_BIT(x)        (((x) & 1) + 6)
#define PNX8550_SPDIF_CATEGORY_BIT(x)    (((x) & 7) + 8)
#define PNX8550_SPDIF_ORIGINAL_BIT       (15)
#define PNX8550_SPDIF_SOURCE_BIT(x)      (((x) & 3) + 16)
#define PNX8550_SPDIF_CHANNEL_BIT(x)     (((x) & 3) + 20)
#define PNX8550_SPDIF_SAMPLERATE_BIT(x)  (((x) & 3) + 24)
#define PNX8550_SPDIF_CLOCK_BIT(x)       (((x) & 3) + 24)

#define PNX8550_SPDO_BUF_VIRTUAL  3840
#define PNX8550_SPDO_BUF_SIZE     7680
#define PNX8550_SPDO_BUF_ALLOC    16384
#define PNX8550_SPDO_SAMPLES      960
#define PNX8550_SPDO_IRQ          PNX8550_INT_SPDO

#endif
